<div class="space-y-2">
  <%= form_with url: messages_path, method: :post, class: "flex gap-2" do %>
    <%= hidden_field_tag :listing_id, @listing.id %>
    <%= hidden_field_tag :receiver_id, @other.id %>
    <input type="hidden" name="kind" value="text">
    <textarea name="content" rows="1" placeholder="Type a message" class="flex-1 resize-none rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none px-3 py-2 text-sm"></textarea>
    <button class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50">Send</button>
  <% end %>
  <%= form_with url: messages_path, method: :post, class: "flex gap-3 items-end text-sm" do %>
    <%= hidden_field_tag :listing_id, @listing.id %>
    <%= hidden_field_tag :receiver_id, @other.id %>
    <%= hidden_field_tag :kind, "transaction" %>
    <% owner = current_user.id == @listing.user_id %>
    <% if @listing.listing_type == "Lend" %>
      <div class="flex flex-col">
        <label class="text-xs text-gray-500 mb-1">End Date</label>
        <input type="date" name="transaction[end_date]" class="rounded border border-gray-300 px-2 py-1 focus:ring-2 focus:ring-blue-400" required <%= 'disabled' unless owner %>>
      </div>
      <button class="px-3 h-10 rounded-lg text-white text-xs font-medium <%= owner ? 'bg-green-600 hover:bg-green-700' : 'bg-gray-300 cursor-not-allowed' %>" <%= 'disabled' unless owner %>>Send Lend Card</button>
    <% else %>
      <button class="px-3 h-10 rounded-lg text-white text-xs font-medium <%= owner ? 'bg-green-600 hover:bg-green-700' : 'bg-gray-300 cursor-not-allowed' %>" <%= 'disabled' unless owner %>>Send Sale Card</button>
    <% end %>
  <% end %>
</div>
